<?php

namespace Validation\Rules;

class DateRange extends AbstractRule{

    public static function check($value, $args)
    {
        if (!Date::check($value, $args)) {
            return false;
        } else {
            $ret = true;

            $a = strtotime($value);

            if (isset($args[0])) {
                if (!Date::check($args[0], $args)) {
                    return false;
                }
                $ret &= ($a >= strtotime($args[0]));
            }

            if (isset($args[1])) {
                if (!Date::check($args[1], $args)) {
                    return false;
                }
                $ret &= ($a <= strtotime($args[0]));
            }

            return $ret;
        }
    }

    public static function getError()
    {
        return \L::tc('Field %0 must be a valid date between %1 and %2', 'validation');
    }
}